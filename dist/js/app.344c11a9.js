(function(t){function e(e){for(var i,r,c=e[0],o=e[1],u=e[2],h=0,d=[];h<c.length;h++)r=c[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,c=1;c<n.length;c++){var o=n[c];0!==s[o]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0eb2":function(t,e,n){},"10b5":function(t,e,n){},"1ccc":function(t,e,n){"use strict";n("bc95")},"1f2c":function(t,e,n){"use strict";n("c5c0")},2395:function(t,e,n){},"2aab":function(t,e,n){"use strict";n("b85f")},"30bb":function(t,e,n){"use strict";n("10b5")},"43d2":function(t,e,n){"use strict";n("dc39")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=n("b970"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transitionName,mode:"out-in"}},[n("router-view",{staticClass:"view"})],1)},r=[],c=(n("b0c0"),{created:function(){var t=JSON.parse(localStorage.getItem("goods"))||{};this.$store.commit("setCounterMap",t)},data:function(){return{transitionName:"left"}},watch:{$route:function(t,e){"classify"===t.name&&"search"===e.name?this.transitionName="right":this.transitionName="left"}}}),o=c,u=(n("7c55"),n("2877")),l=Object(u["a"])(o,a,r,!1,null,null,null),h=l.exports,d=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("router-view"),n("tab-bar")],1)},g=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-bar-wrapper"},[n("van-tabbar",{attrs:{route:"",fixed:""}},[n("van-tabbar-item",{attrs:{icon:"apps-o",to:"/home/classify"}},[t._v("分类")]),n("van-tabbar-item",{attrs:{id:"shopping",icon:"cart-o",badge:t.badge,to:"/home/shopping"}},[t._v("购物车")])],1)],1)},m=[],b=(n("13d5"),n("07ac"),n("5530")),v=n("2f62"),y={computed:Object(b["a"])(Object(b["a"])({},Object(v["d"])(["counterMap"])),{},{badge:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return t>99?"99+":t}})},L=y,j=(n("f77a"),Object(u["a"])(L,f,m,!1,null,"30bea82a",null)),k=j.exports,w={name:"Home",components:{TabBar:k}},O=w,x=Object(u["a"])(O,p,g,!1,null,null,null),_=x.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"classify-warpper"},[n("router-link",{attrs:{to:"/search"}},[n("div",{staticClass:"search-btn"},[n("van-icon",{attrs:{name:"search"}}),n("div",{staticClass:"search-value"},[t._v("进口苹果1元1斤")])],1)]),n("one-tab"),t.isLoading?n("van-loading",{attrs:{size:"2rem",vertical:""}}):[n("side-bar"),n("goods-list")]],2)},R=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"oneTab",staticClass:"one-tab-warpper"},t._l(t.menuList,(function(e,i){return n("div",{key:e.title,staticClass:"tab-item",class:{active:t.index==i},on:{touchend:function(e){return t.scrollTo(i,e)},touchstart:function(e){t.move=!1},touchmove:function(e){t.move=!0}}},[n("div",{staticClass:"img-warpper"},[n("img",{attrs:{src:e.imgURL}})]),n("div",{staticClass:"tab-title"},[t._v(t._s(e.title))])])})),0)},S=[];function G(t,e,n,i){var s=0,a=5;e<0&&(a*=-1);var r=setInterval((function(){s+=a,n[i]=t+s,Math.abs(s)>=Math.abs(e)&&(n[i]=t+e,clearInterval(r))}),2)}var M={data:function(){return{index:0,move:!1,menuList:[{title:"时令水果",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/时令水果.jpg"},{title:"酒水冲调",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/酒水冲调.jpg"},{title:"安心乳品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/安心乳品.jpg"},{title:"休闲零食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/休闲零食.jpg"},{title:"肉蛋食材",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/肉蛋食材.jpg"},{title:"新鲜蔬菜",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/新鲜食材.jpg"},{title:"熟食餐饮",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/熟食餐饮.jpg"},{title:"海鲜水产",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/海鲜水产.jpg"},{title:"粮油调味",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/粮油调味.jpg"},{title:"某手美食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/某手美食.jpg"},{title:"纸杯清洁",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/纸品清洁.jpg"},{title:"个人护理",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/个人护理.jpg"},{title:"美妆护肤",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/美妆护肤.jpg"},{title:"家居收纳",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家居收纳.jpg"},{title:"家用电器",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家用电器.jpg"},{title:"3C数码",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/3C数码.jpg"},{title:"母婴用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/母婴用品.jpg"},{title:"鲜花绿植",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/鲜花绿植.jpg"},{title:"宠物用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/宠物用品.jpg"},{title:"图书玩具",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/图书文具.jpg"},{title:"手表配饰",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/手表配饰.jpg"}]}},methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(v["b"])(["getSideList","resetGoodsList"])),Object(v["c"])(["setGoodsType"])),{},{scrollTo:function(t,e){if(!this.move){this.index=t,this.getSideList(this.menuList[this.index].title);var n=this.$refs.oneTab,i=e.target.offsetWidth,s=e.target.getBoundingClientRect().left,a=n.offsetWidth,r=i/2+s-a/2;G(n.scrollLeft,r,n,"scrollLeft")}}}),mounted:function(){this.getSideList(this.menuList[0].title)}},$=M,U=(n("6b06"),Object(u["a"])($,T,S,!1,null,"3e50e856",null)),F=U.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"sidebar",staticClass:"side-bar-wrapper"},t._l(this.sideList,(function(e,i){return n("div",{key:e,class:["side-bar-item",{active:t.index==i}],on:{touchend:function(n){return t.scrollTo(i,e,n)},touchstart:function(e){t.move=!1},touchmove:function(e){t.move=!0}}},[t._v(" "+t._s(0==i?"全部":e)+" ")])})),0)},I=[],B={computed:Object(b["a"])({},Object(v["d"])(["sideList"])),data:function(){return{index:0,move:!1}},methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(v["b"])(["getGoodsList"])),Object(v["c"])(["resetGoodsList","setGoodsType"])),{},{scrollTo:function(t,e,n){if(!this.move){this.index=t;var i=this.$refs.sidebar,s=n.target.offsetHeight,a=i.offsetHeight,r=n.target.getBoundingClientRect().top,c=i.getBoundingClientRect().top,o=r-c+s/2-a/2;G(i.scrollTop,o,i,"scrollTop"),this.resetGoodsList(),this.setGoodsType(e),this.getGoodsList({page:1})}}}),created:function(){this.getGoodsList({page:1,sort:"all"})}},P=B,V=(n("1ccc"),Object(u["a"])(P,E,I,!1,null,"c514c016",null)),H=V.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"list-header van-hairline--top-bottom"},[n("div",{class:{active:"all"===t.sortType},on:{click:function(e){return t.changeType("all")}}},[t._v(" 综合 ")]),n("div",{class:{active:"sale"===t.sortType},on:{click:function(e){return t.changeType("sale")}}},[t._v(" 销量 ")]),n("div",{class:["price",{"price-up":"price-up"===t.sortType,"price-down":"price-down"===t.sortType}],on:{click:function(e){return t.changeType("price")}}},[t._v(" 价格 ")])]),n("div",{staticClass:"list-content"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.loadFinish,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e,i){return n("goods-card",{key:i,attrs:{goods:e,changeHandler:t.storageChange,num:t.counterMap[e.id]}})})),1)],1)],1)])},z=[],A=(n("96cf"),n("1da1")),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-wrapper"},[n("div",{staticClass:"card-img"},[n("img",{ref:"img",attrs:{src:t.goods.images[0]}})]),n("div",{staticClass:"card-content"},[n("div",{staticClass:"title over-hidden"},[t._v(t._s(t.goods.title))]),n("div",{staticClass:"desc over-hidden"},[t._v(t._s(t.goods.desc))]),t._l(t.goods.tags,(function(e,i){return n("div",{key:"tags"+i,staticClass:"tags"},[t._v(t._s(e))])})),n("div",{staticClass:"price"},[t._v("￥"+t._s(t.goods.price))]),n("div",{staticClass:"counter"},[t.num?n("div",{on:{click:function(e){return t.changeLess({id:t.goods.id,value:-1})}}},[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png"}})]):t._e(),t.num?n("div",{staticClass:"num"},[t._v(t._s(t.num))]):t._e(),n("div",{on:{click:t.flyToShopping}},[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png"}})])])],2)])},X=[],Y=n("d399"),D=(n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.exist?n("div",{staticClass:"item",style:{transform:"translate("+t.moveX+"px,"+t.moveY+"px) scale("+t.sx+","+t.sy+")",opacity:t.width,height:t.height}},[n("img",{attrs:{src:t.src}})]):t._e()}),W=[],q={},K=q,Q=(n("6885"),Object(u["a"])(K,D,W,!1,null,"42bff9b6",null)),Z=Q.exports,tt=i["a"].extend(Z);function et(t){var e,n,i=t.startX,s=t.startY,a=t.endX,r=t.endY,c=t.width,o=t.height,u=t.src,l=new tt({el:document.createElement("div"),data:function(){return{moveX:i,moveY:s,sx:1,sy:1,opacity:1,exist:!0,src:u,width:c,height:o}}});document.body.appendChild(l.$el),"string"===typeof c?(e=+c.slice(0,c.length-2),n=+o.slice(0,o.length-2)):(n=o,e=c),s>r&&(n*=-1,e*=-1),setTimeout((function(){l.moveX=a+e/2,l.moveY=r+n/2,l.sx=.01,l.sy=.01,l.opacity=0}),0),setTimeout((function(){l.exist=!1}),700)}var nt={props:["goods","changeHandler","num","noFly"],data:function(){return{}},methods:{changeLess:function(t){1===this.num&&this.noFly?Object(Y["a"])("该商品不能再减了喔~"):this.changeHandler(t)},flyToShopping:function(){if(this.changeHandler({id:this.goods.id,value:1}),!this.noFly){var t=this.$refs.img.getBoundingClientRect(),e=t.left,n=t.top,i=document.getElementById("shopping"),s=i.getBoundingClientRect(),a=s.left,r=s.top,c=getComputedStyle(i,null),o=c.width,u=c.height;et({startX:e,startY:n,endX:a,endY:r,width:o,height:u,src:this.$refs.img.src})}}}},it=nt,st=(n("43d2"),Object(u["a"])(it,J,X,!1,null,"41254c18",null)),at=st.exports,rt={components:{GoodsCard:at},computed:Object(b["a"])({},Object(v["d"])(["page","goodsList","goodsTotal","counterMap","loadFinish"])),data:function(){return{sortType:"all",loading:!1,isLoading:!1}},methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(v["c"])(["resetGoodsList","setPage","setGoodsList","setSortType","storageChange","setLoadFinish"])),Object(v["b"])(["getGoodsList"])),{},{onLoad:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loadFinish){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,t.setPage(t.page+1),e.next=6,t.getGoodsList();case 6:t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.resetGoodsList(),t.loading=!0,e.next=5,t.getGoodsList();case 5:t.loading=!1,t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},changeType:function(t){"price"!==t?this.sortType=t:"price-up"===this.sortType?this.sortType="price-down":this.sortType="price-up",this.setSortType(this.sortType),this.onRefresh()}})},ct=rt,ot=(n("2aab"),Object(u["a"])(ct,N,z,!1,null,null,null)),ut=ot.exports,lt={components:{OneTab:F,SideBar:H,GoodsList:ut},computed:Object(b["a"])({},Object(v["d"])(["isLoading"]))},ht=lt,dt=(n("f88a"),Object(u["a"])(ht,C,R,!1,null,"0ddc6548",null)),pt=dt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-warpper"},[n("div",{staticClass:"search-head"},[n("div",{staticClass:"arr-left"},[n("van-icon",{attrs:{name:"arrow-left"},on:{click:function(e){return t.$router.back(-1)}}})],1),n("van-search",{staticClass:"search-content",attrs:{value:t.searchValue,"show-action":"",placeholder:t.place,autofocus:""},on:{input:t.onInput,focus:t.onFocus},scopedSlots:t._u([t.showList?{key:"action",fn:function(){return[n("div",{on:{click:function(e){return t.onSearch(t.searchValue)}}},[t._v("搜索")])]},proxy:!0}:{key:"action",fn:function(){return[n("router-link",{attrs:{to:"/home/shopping"}},[n("div",{staticClass:"shop-car",attrs:{id:"shopping"}},[n("van-icon",{attrs:{name:"shopping-cart-o",badge:t.badge}})],1)])]},proxy:!0}],null,!0)})],1),t.showList?n("div",{staticClass:"likesearch"},[n("van-list",t._l(t.likeList,(function(e,i){return n("van-cell",{key:i,attrs:{title:e},on:{click:function(n){return t.clickList(e)}}})})),1)],1):n("div",{staticClass:"goods-list"},[n("van-list",{attrs:{finished:t.searchFinish,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.searchLoading,callback:function(e){t.searchLoading=e},expression:"searchLoading"}},t._l(t.searchList,(function(e,i){return n("goods-card",{key:i,attrs:{goods:e,changeHandler:t.storageChange,num:t.counterMap[e.id]}})})),1)],1),t.likeList.length<=0&&t.showList?n("div",{staticClass:"history-list"},[n("history",{attrs:{historyList:t.historyList},on:{search:t.historySearch}})],1):t._e()])},ft=[],mt=(n("99af"),n("7db0"),n("2909")),bt=(n("ac1f"),n("841c"),n("bc3a")),vt=n.n(bt),yt="https://mallapi.duyiedu.com/goods/",Lt={getsidebar:"/getsidebar",getGoodsList:"/getGoodsList",search:"/search",likeSearch:"/likeSearch",getGoodsByIds:"/getGoodsByIds"},jt="dd_1597654682810",kt=vt.a.create({baseURL:yt,params:{appkey:jt}});function wt(t){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(A["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt.get(Lt.getsidebar,{params:{type:e}});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),Ot.apply(this,arguments)}function xt(t,e,n,i){return _t.apply(this,arguments)}function _t(){return _t=Object(A["a"])(regeneratorRuntime.mark((function t(e,n,i,s){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt.get(Lt.getGoodsList,{params:{type:e,page:n,sort:i,size:s}});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)}))),_t.apply(this,arguments)}function Ct(t){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(A["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt.get(Lt.likeSearch,{params:{likeValue:e}});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),Rt.apply(this,arguments)}function Tt(t,e,n){return St.apply(this,arguments)}function St(){return St=Object(A["a"])(regeneratorRuntime.mark((function t(e,n,i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt.get(Lt.search,{params:{type:e,page:n,size:i}});case 2:return s=t.sent,t.abrupt("return",s.data);case 4:case"end":return t.stop()}}),t)}))),St.apply(this,arguments)}function Gt(t){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(A["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt.get(Lt.getGoodsByIds,{params:{value:e}});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),Mt.apply(this,arguments)}var $t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",[t._v("历史记录：")]),t._l(t.historyList,(function(e,i){return n("div",{key:i,staticClass:"his-item",on:{click:function(n){return t.onClick(e.value)}}},[t._v(t._s(e.value))])}))],2)},Ut=[],Ft={props:["historyList"],methods:{onClick:function(t){this.$emit("search",t)}}},Et=Ft,It=(n("1f2c"),Object(u["a"])(Et,$t,Ut,!1,null,"008c239f",null)),Bt=It.exports,Pt={components:{GoodsCard:at,History:Bt},computed:Object(b["a"])(Object(b["a"])({},Object(v["d"])(["counterMap"])),{},{badge:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return t>99?"99+":t}}),data:function(){return{searchList:[],searchValue:"",searchTotal:0,searchPage:1,pageSize:7,searchLoading:!1,searchFinish:!1,showList:!0,likeLoading:!1,likefinished:!1,likeList:[],place:"酒",historyList:[]}},methods:Object(b["a"])(Object(b["a"])({},Object(v["c"])(["storageChange"])),{},{onInput:function(t){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.searchValue=t,""!==t){n.next=4;break}return e.likeList=[],n.abrupt("return");case 4:return n.next=6,Ct(t);case 6:i=n.sent,e.likeList=i.result;case 8:case"end":return n.stop()}}),n)})))()},historySearch:function(t){this.searchValue=t,this.onSearch()},clickList:function(t){this.searchValue=t,this.onSearch()},initSearch:function(){this.searchTotal=0,this.searchPage=1,this.searchFinish=!1},onSearch:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showList=!1,t.searchLoading=!0,t.initSearch(),""===t.searchValue&&(t.searchValue=t.place),n=t.historyList.find((function(e){return e.value===t.searchValue})),n?(n.time=(new Date).getTime(),t.historyList.sort((function(t,e){return e.time-t.time}))):(t.historyList.unshift({value:t.searchValue,time:(new Date).getTime()}),t.historyList.length>=11&&t.historyList.pop()),localStorage.setItem("historyList",JSON.stringify(t.historyList)),e.next=9,Tt(t.searchValue,t.searchPage,t.pageSize);case 9:i=e.sent,t.searchTotal=i.total,t.searchList=i.list,t.searchList.length>=t.searchTotal&&(t.searchFinish=!0),t.searchLoading=!1;case 14:case"end":return e.stop()}}),e)})))()},onFocus:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.showList=!0,""!==t.searchValue){e.next=4;break}return t.likeList=[],e.abrupt("return");case 4:return e.next=6,Ct(t.searchValue);case 6:n=e.sent,t.likeList=n.result;case 8:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.searchFinish){e.next=2;break}return e.abrupt("return");case 2:return t.searchLoading=!0,t.searchPage+=1,e.next=6,Tt(t.searchValue,t.searchPage,t.pageSize);case 6:n=e.sent,t.searchTotal=n.total,t.searchList=[].concat(Object(mt["a"])(t.searchList),Object(mt["a"])(n.list)),t.searchList.length>=t.searchTotal&&(t.searchFinish=!0),t.searchLoading=!1;case 11:case"end":return e.stop()}}),e)})))()}}),created:function(){this.historyList=JSON.parse(localStorage.getItem("historyList"))||[]}},Vt=Pt,Ht=(n("30bb"),Object(u["a"])(Vt,gt,ft,!1,null,"29427f34",null)),Nt=Ht.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shopping"},[n("div",{staticClass:"top-nav"},[n("van-nav-bar",{attrs:{title:"购物车","right-text":"删除"},on:{"click-right":t.del}})],1),0!==t.list.length?n("div",{staticClass:"card-list"},[n("van-checkbox-group",{ref:"checkBoxGroup",model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.list,(function(e){return n("div",{key:e.id,staticClass:"card-box"},[n("van-checkbox",{staticClass:"btn",attrs:{name:e.id}}),n("goods-card",{attrs:{changeHandler:t.storageChange,noFly:!0,goods:e,num:t.counterMap[e.id]}})],1)})),0)],1):n("div",{staticClass:"card-none"},[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg",alt:""}})]),n("van-submit-bar",{staticClass:"submit",attrs:{price:t.allMoney,"button-text":"去结算（"+t.checkList.length+"）"},on:{submit:t.onSubmit}},[n("van-checkbox",{on:{click:t.checkAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],1)},At=[],Jt=(n("4de4"),n("4160"),n("a15b"),n("b64b"),n("159b"),{components:{GoodsCard:at},computed:Object(b["a"])(Object(b["a"])({},Object(v["d"])(["counterMap"])),{},{allMoney:function(){var t=this,e=0;return this.checkList.forEach((function(n){var i=t.list.filter((function(t){return t.id===n}))[0].price;e+=t.counterMap[n]*i*100})),e}}),data:function(){return{checkList:[],checked:!1,list:[]}},watch:{checkList:function(){this.checkList.length===this.list.length?this.checked=!0:this.checked=!1}},methods:Object(b["a"])(Object(b["a"])({},Object(v["c"])(["storageChange"])),{},{checkAll:function(){if(!this.$refs.checkBoxGroup)return Object(Y["a"])("购物车没有商品"),void(this.checked=!1);this.checked?this.$refs.checkBoxGroup.toggleAll(!0):this.$refs.checkBoxGroup.toggleAll(!1)},onSubmit:function(){0===this.checkList.length?Object(Y["a"])("还未选中商品"):Object(Y["a"])("模拟：提交成功")},getAllData:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("goods")),i=Object.keys(n),e.next=4,Gt(i.join());case 4:s=e.sent,t.list=s.list;case 6:case"end":return e.stop()}}),e)})))()},del:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.checkList.forEach((function(e){t.storageChange({id:e,value:"del"})})),t.checkList=[],e.next=4,t.getAllData();case 4:case"end":return e.stop()}}),e)})))()}}),created:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAllData();case 2:case"end":return e.stop()}}),e)})))()}}),Xt=Jt,Yt=(n("c352"),Object(u["a"])(Xt,zt,At,!1,null,"c00310e4",null)),Dt=Yt.exports;i["a"].use(d["a"]);var Wt=[{path:"*",redirect:"/home/classify"},{path:"/home",name:"Home",component:_,children:[{component:pt,name:"classify",path:"classify"},{component:Dt,name:"shopping",path:"shopping"}]},{path:"/search",name:"search",component:Nt}],qt=new d["a"]({mode:"history",base:"/",routes:Wt}),Kt=qt;i["a"].use(v["a"]);var Qt=new v["a"].Store({state:{sideList:[],isLoading:!1,goodsList:[],size:7,goodsType:"",goodsTotal:0,sortType:"all",counterMap:{},loadFinish:!1,page:1},mutations:{setPage:function(t,e){t.page=e},setLoadFinish:function(t,e){t.loadFinish=e},setCounterMap:function(t,e){t.counterMap=e},setSortType:function(t,e){t.sortType=e},setGoodsList:function(t,e){t.goodsList=[].concat(Object(mt["a"])(t.goodsList),Object(mt["a"])(e))},setSideList:function(t,e){t.sideList=e},setIsLoading:function(t,e){t.isLoading=e},resetGoodsList:function(t){t.goodsList=[],t.loadFinish=!1,t.page=1},setGoodsType:function(t,e){t.goodsType=e},setGoodsTotal:function(t,e){t.goodsTotal=e},storageChange:function(t,e){var n=e.id,s=e.value;t.counterMap[n]?"del"===s||-1===s&&1===t.counterMap[n]?i["a"].delete(t.counterMap,n):i["a"].set(t.counterMap,n,t.counterMap[n]+s):i["a"].set(t.counterMap,n,1),localStorage.setItem("goods",JSON.stringify(t.counterMap))}},actions:{getSideList:function(t,e){return Object(A["a"])(regeneratorRuntime.mark((function n(){var i,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.commit,s=t.dispatch,i("setIsLoading",!0),n.next=4,wt(e);case 4:return a=n.sent,i("setSideList",a),i("setGoodsType",a[0]),i("resetGoodsList"),n.next=10,s("getGoodsList",{page:1});case 10:i("setIsLoading",!1);case 11:case"end":return n.stop()}}),n)})))()},getGoodsList:function(t){return Object(A["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a,r,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,s=n.size,a=n.page,r=n.sortType,c=n.goodsType,e.next=6,xt(c,a,r,s);case 6:o=e.sent,i("setGoodsList",o.list),i("setGoodsTotal",o.total),i("setSortType",r),i("setGoodsType",c),n.goodsList.length>=o.total?i("setLoadFinish",!0):i("setLoadFinish",!1);case 12:case"end":return e.stop()}}),e)})))()}},modules:{}});n("499a"),n("157a");i["a"].use(s["a"]),i["a"].config.productionTip=!1,new i["a"]({router:Kt,store:Qt,render:function(t){return t(h)}}).$mount("#app")},6885:function(t,e,n){"use strict";n("0eb2")},"6b06":function(t,e,n){"use strict";n("d578")},"6ecb":function(t,e,n){},"7c55":function(t,e,n){"use strict";n("2395")},b85f:function(t,e,n){},bc95:function(t,e,n){},c352:function(t,e,n){"use strict";n("f955")},c5c0:function(t,e,n){},d578:function(t,e,n){},d822:function(t,e,n){},dc39:function(t,e,n){},f77a:function(t,e,n){"use strict";n("d822")},f88a:function(t,e,n){"use strict";n("6ecb")},f955:function(t,e,n){}});
//# sourceMappingURL=app.344c11a9.js.map